{% extends "base.html" %}

{% block title %}Settings - Whale Wallet{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <div class="page-eyebrow">SYSTEM · SECURITY · CONFIGURATION</div>
        <h1 class="page-title">Settings</h1>
        <p class="page-subtitle">Security configuration and account settings</p>
    </div>
</div>

<div class="grid grid-2">
    <!-- Left Column -->
    <div class="flex flex-col gap-lg">
        <!-- Account Info -->
        <div class="card">
            <div class="card-header">
                <span class="card-label">Account</span>
                <span class="badge badge-info">Humpback Tier</span>
            </div>
            <table class="data-table" style="border: none;">
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Email</td>
                    <td style="text-align: right; border: none; padding: 8px 0;">whale@example.com</td>
                </tr>
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">User ID</td>
                    <td class="mono" style="text-align: right; border: none; padding: 8px 0;">usr_demo123456789</td>
                </tr>
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Member Since</td>
                    <td style="text-align: right; border: none; padding: 8px 0;">January 2026</td>
                </tr>
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Benefits</td>
                    <td style="text-align: right; border: none; padding: 8px 0;">0% swap fees, advanced policies</td>
                </tr>
            </table>
        </div>

        <!-- MPC Key Status -->
        <div class="card">
            <div class="card-header">
                <span class="card-label">MPC Key Status</span>
                <span class="badge badge-success">Healthy</span>
            </div>
            <div class="mpc-grid mb-lg">
                <div class="mpc-node active">
                    <div class="mpc-icon">M</div>
                    <span class="mpc-label">Mobile</span>
                </div>
                <div class="mpc-node active">
                    <div class="mpc-icon">S</div>
                    <span class="mpc-label">Server</span>
                </div>
                <div class="mpc-node active">
                    <div class="mpc-icon">R</div>
                    <span class="mpc-label">Recovery</span>
                </div>
            </div>
            <table class="data-table" style="border: none;">
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Last Rotation</td>
                    <td style="text-align: right; border: none; padding: 8px 0;">30 days ago</td>
                </tr>
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Next Recommended</td>
                    <td style="text-align: right; border: none; padding: 8px 0; color: var(--state-warning);">60 days
                    </td>
                </tr>
            </table>
            <button class="btn" style="width: 100%; margin-top: 16px;"
                onclick="WhaleWallet.Toast.info('Key rotation requires mobile app confirmation')">
                Initiate Key Rotation
            </button>
        </div>

        <!-- Duress Mode -->
        <div class="card" style="border-left: 3px solid var(--state-error);">
            <div class="card-header">
                <span class="card-label">Duress Mode</span>
                <span class="badge">Configured</span>
            </div>
            <p style="color: var(--text-secondary); margin-bottom: 16px;">
                Enter duress PIN under coercion to show decoy wallet while alerting contacts.
            </p>
            <table class="data-table" style="border: none;">
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Decoy Balance</td>
                    <td class="mono" style="text-align: right; border: none; padding: 8px 0;">$5,432.10</td>
                </tr>
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Alert Contacts</td>
                    <td style="text-align: right; border: none; padding: 8px 0;">3 configured</td>
                </tr>
            </table>
            <button class="btn" style="width: 100%; margin-top: 16px;">Configure Duress Mode</button>
        </div>
    </div>

    <!-- Right Column -->
    <div class="flex flex-col gap-lg">
        <!-- Inheritance Protocol -->
        <div class="card" style="border-left: 3px solid var(--state-warning);">
            <div class="card-header">
                <span class="card-label">Inheritance Protocol</span>
                <span class="badge badge-success">Active</span>
            </div>
            <p style="color: var(--text-secondary); margin-bottom: 16px;">
                Dead Man's Switch ensures assets pass to heirs after extended inactivity.
            </p>
            <table class="data-table" style="border: none;">
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Last Ping</td>
                    <td style="text-align: right; border: none; padding: 8px 0; color: var(--state-success);">Just now
                    </td>
                </tr>
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Inactivity Threshold</td>
                    <td style="text-align: right; border: none; padding: 8px 0;">180 days</td>
                </tr>
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Days Until Trigger</td>
                    <td style="text-align: right; border: none; padding: 8px 0;">180</td>
                </tr>
                <tr>
                    <td style="color: var(--text-muted); border: none; padding: 8px 0;">Guardians</td>
                    <td style="text-align: right; border: none; padding: 8px 0;">3 of 5</td>
                </tr>
            </table>
            <div class="flex gap-md mt-lg">
                <button class="btn btn-primary" style="flex: 1;"
                    onclick="WhaleWallet.Toast.success('Ping successful')">Ping Now</button>
                <button class="btn" style="flex: 1;">Configure</button>
            </div>
        </div>

        <!-- Security Preferences -->
        <div class="card">
            <div class="card-header">
                <span class="card-label">Security Preferences</span>
            </div>
            <div class="flex flex-col">
                <div class="flex justify-between items-center"
                    style="padding: 12px 0; border-bottom: 1px solid var(--border);">
                    <div>
                        <div style="font-weight: 500;">Biometric Authentication</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Require Face ID / fingerprint</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="flex justify-between items-center"
                    style="padding: 12px 0; border-bottom: 1px solid var(--border);">
                    <div>
                        <div style="font-weight: 500;">Transaction Simulation</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Always simulate before signing</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="flex justify-between items-center"
                    style="padding: 12px 0; border-bottom: 1px solid var(--border);">
                    <div>
                        <div style="font-weight: 500;">Email Notifications</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Get notified of transactions</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="flex justify-between items-center" style="padding: 12px 0;">
                    <div>
                        <div style="font-weight: 500;">Hide Balances</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Mask values on dashboard</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Guardians -->
        <div class="card">
            <div class="card-header">
                <span class="card-label">Guardians</span>
                <button class="btn btn-sm">Add</button>
            </div>
            <p style="color: var(--text-secondary); margin-bottom: 16px;">
                Guardians hold recovery shards for account recovery.
            </p>
            <div class="flex flex-col gap-md">
                <div class="policy-card">
                    <div class="policy-info">
                        <div class="policy-icon">JD</div>
                        <div>
                            <div class="policy-name">John D.</div>
                            <div class="policy-desc">john@example.com</div>
                        </div>
                    </div>
                    <span class="badge badge-success">Confirmed</span>
                </div>
                <div class="policy-card">
                    <div class="policy-info">
                        <div class="policy-icon">SM</div>
                        <div>
                            <div class="policy-name">Sarah M.</div>
                            <div class="policy-desc">sarah@example.com</div>
                        </div>
                    </div>
                    <span class="badge badge-success">Confirmed</span>
                </div>
                <div class="policy-card">
                    <div class="policy-info">
                        <div class="policy-icon">MT</div>
                        <div>
                            <div class="policy-name">Mike T.</div>
                            <div class="policy-desc">mike@example.com</div>
                        </div>
                    </div>
                    <span class="badge badge-warning">Pending</span>
                </div>
            </div>
        </div>

        <!-- Danger Zone -->
        <div class="card" style="border: 1px solid var(--state-error);">
            <div class="card-header">
                <span class="card-label" style="color: var(--state-error);">Danger Zone</span>
            </div>
            <div class="flex gap-md">
                <button class="btn">Export Data</button>
                <button class="btn" style="color: var(--state-error);"
                    onclick="localStorage.removeItem('whale_token'); window.location.href='/login';">Logout</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}